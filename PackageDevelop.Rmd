---
title: "PackageDevelopment"
author: "Miriam Lerma"
date: "Abril 2021"
output:
  xaringan::moon_reader:
    css: Package-themer.css
    seal: false
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: true
---


```{r xaringan_params, echo=FALSE, include = FALSE}
#Paquetes
library(xaringanExtra)
library(kableExtra)
options(knitr.table.format = "latex")
```

class: title-slide, center, middle
background-image: url(https://images.unsplash.com/photo-1518289646039-3e6c87a5aaf6?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1351&q=80)
background-size: cover

`r text_spec("Crear tus propios", background = "#000000", color = "white", bold = T)` <br>
<br>
<br>
`r text_spec("Paquetes", background = "#000000", color = "white", bold = T, font_size=120)`

<br>
<h2>`r text_spec("Miriam Lerma", background = "#000000", color = "white", bold = T)`</h2>

<h3>`r text_spec("Abril 2021", background = "#000000", color = "white", bold = T)`</h3>


---
class: inverse

# Intro

- [Que es un paquete](#intro)  
- [Como agregar datos](#datos)
- [Como crear funciÃ³n](#funciones)
- [Como crear hexsticker](#sticker)

```{r paquetes, echo=FALSE}
library(emo)
library(fontawesome)
ColorEnlace<-'#7209B7'
ColorEnlaceInverso<-"#4cc9f0"
xaringanExtra::use_clipboard()
```

```{r xaringan-panelset, echo=FALSE}
xaringanExtra::use_panelset()
```

---

class: inverse

# CrÃ©ditos y recursos

- Libros<br>
[R Packages](https://r-pkgs.org/intro.html)

- Datos <br>
[Incluir datos](https://r-pkgs.org/man.html) <br>
[Documentar datos](https://kbroman.org/pkg_primer/pages/data.html) <br>

- Funciones <br>
Tu paquete en una hora por [`r fa("external-link-alt", fill = ColorEnlaceInverso)` Piping hot data](https://www.pipinghotdata.com/posts/2020-10-25-your-first-r-package-in-1-hour/)<br>

---
name: intro
class: title-slide, center, middle
background-image: url(https://images.unsplash.com/photo-1518289646039-3e6c87a5aaf6?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1351&q=80)
background-size: cover

`r text_spec("Paquetes", background = "#000000", color = "white", bold = T, font_size=120)`

---

## 1.1. Intro

**Motivantes**

- Repito pasos y anÃ¡lisis con datos similares...  
.right[ _hasta ahora reciclo funciones de scripts anteriores_ ]

- Estudiantes y colegas me preguntan como realizar anÃ¡lisis similares...  
.right[ _muchos no estan familizarizados con la sintaxis de las funciones_]

- Los artÃ­culos me piden mÃ¡s detalles de como se realizaron los anÃ¡lisis...   
.right[ _el espacio es limitado para dar detalles_ ]

- Existen paquetes similares pero que no cubren con todos los pasos...   
.right[  _uso partes de algunos paquetes y adapto a mi nuevo analisis_ ]

- Quiero que otras personas puedan replicar mis anÃ¡lisis...   
.right[ _quiero que las funciones esten accesibles_ ]



- Quiero hacer las funciones y documentaciÃ³n accesibles en ingles y espaÃ±ol.  

---

## 1.2. Crear paquete

**Paquete**  
Para crear paquetes yo use el paquete **usethis**

Para instalar y cargar el paquete:
```{r, eval=FALSE}
#install.packages('usethis')
library(usethis)
```

---

## 1.2. Checa nombre

Antes de iniciar tu paquete, puedes consultar el nombre que le daras en la pagina [CRAN](https://cran.r-project.org/)

Para ayudarte, existe la libreria **available** para revisar si tu paquete ya existe en CRAN o en github y si el nombre de tu paquete puede ser ofensivo.
```{r, eval=FALSE}
install.packages('available')
library(available)
available("El nombre de tu paquete")
```

Ejemplo con mi paquete:
```{r, eval=FALSE}
library(available)
available("spheniscus")
```
Una vez le des enter, te pregunta si quieres que revise por contenido ofensivo, puedes poner **Y**.
```{r, eval=FALSE}
Urban Dictionary can contain potentially offensive results,
  should they be included? [Y]es / [N]o:
```
DespuÃ©s te abre las paginas para mostrarte que significa el nombre de tu paquete.

---

## 1.3. Crear

Para crear un paquete la funciÃ³n **create_package** crea el **esqueleto** de los paquetes.  <br>
Dentro pon el nombre del paquete que te interesa.  
```{r, eval=FALSE}
usethis::create_package("nombre_paquete")
```

Te debio aparecer algo asi:
```{r, eval=FALSE}
âˆš Creating 'nombre_paquete/'
âˆš Setting active project to '...'
âˆš Creating 'R/'
âˆš Writing 'DESCRIPTION'
Package: nombre_paquete
Title: What the Package Does (One Line, Title Case)
Version: 0.0.0.9000
Authors@R (parsed):
    * First Last <first.last@example.com> [aut, cre] (YOUR-ORCID-ID)
Description: What the package does (one paragraph).
License: `use_mit_license()`, `use_gpl3_license()` or friends to
    pick a license
Encoding: UTF-8
LazyData: true
Roxygen: list(markdown = TRUE)
RoxygenNote: 7.1.1
âˆš Writing 'NAMESPACE'
âˆš Writing 'nombre_paquete.Rproj'
âˆš Adding '^nombre_paquete\\.Rproj$' to '.Rbuildignore'
âˆš Adding '.Rproj.user' to '.gitignore'
âˆš Adding '^\\.Rproj\\.user$' to '.Rbuildignore'
âˆš Opening '...' in new RStudio session
âˆš Setting active project to '<no active project>'
```

---

## 1.3. Crear

Creo los archivos:
- .gitignore
- .Rbuildignore
- DESCRIPTIOn
- NAMESPACE
- README.md

Los Folders:
- R


---

## 1.1. Intro

Si estas dentro de un **proyecto** te va preguntar si quieres sobregrabar el proyecto existente.  
Yo le di **2: Absolutely**

```{r, eval=FALSE}
v Writing 'NAMESPACE'
Overwrite pre-existing file 'nombre_paquete.Rproj'?

1: Not now
2: Absolutely
3: No way
```

Me aparecio:
```{r, eval=FALSE}
v Writing 'nombre_paquete.Rproj'
v Adding '^nombre_paquete\\.Rproj$' to '.Rbuildignore'
v Adding '^\\.Rproj\\.user$' to '.Rbuildignore'
v Opening '...' in new RStudio session
v Setting active project to '<no active project>'
```
Me abrio el proyecto en otra ventana.


---

## 1.2. Git

Si ya tienes instalado git puedes directamente conectar el paquete con tu repositorio.

Primero puedes escribir en tu consola:
```{r, eval=FALSE}
usethis::use_git()
```

Te aparece:
```{r, eval=FALSE}
âˆš Setting active project to '...'
âˆš Adding '.Rdata', '.httr-oauth', '.DS_Store' to '.gitignore'
There are 6 uncommitted files:
 '.gitignore'
 '.Rbuildignore'
 'DESCRIPTION'
 'NAMESPACE'
Is it ok to commit them?

1: Absolutely not
2: Yup
3: Negative
```

Yo le dije 3: Yup... aunque me tomo un segundo decidir que eso era un **si**

---

## 1.2. Git

Me aparecio
```{r, eval=FALSE}
âˆš Adding files
âˆš Making a commit with message 'Initial commit
* A restart of RStudio is required to activate the Git pane
Restart now?
1: Yup
2: No
3: Not now
```

Yo le dije 1: Yup... que es como decir **sipi**

Y se reinicio la sesion

---

## 1.3. Github

Otra vez en la consola escribi
```{r, eval=FALSE}
usethis::use_github()
```

Me aparecio
```{r, eval=FALSE}
i Defaulting to https Git protocol
âˆš Setting active project to 'C:/Users/Lerma/Documents/spheniscus'
âˆš Checking that current branch is default branch ('master')
âˆš Creating GitHub repository 'MiriamLL/spheniscus'
âˆš Setting remote 'origin' to 'https://github.com/MiriamLL/spheniscus.git'
âˆš Setting URL field in DESCRIPTION to 'https://github.com/MiriamLL/spheniscus'
âˆš Setting BugReports field in DESCRIPTION to 'https://github.com/MiriamLL/spheniscus/issues'
There is 1 uncommitted file:
 'DESCRIPTION'
Is it ok to commit it?
1: No
2: No way
3: I agree
```
Le di 3: I agree

---

## 1.4. Github

Me aparecio
```{r, eval=FALSE}
âˆš Adding files
âˆš Making a commit with message 'Add GitHub links to DESCRIPTION'
âˆš Pushing 'master' branch to GitHub and setting 'origin/master' as upstream branch
âˆš Opening URL 'https://github.com/...'
```
Y me abrio github

---

## 1.4. devtools

Escribi en la consola
```{r, eval=FALSE}
devtools::check()
```

Y checo la version, plataforma, sesiones y demas.   
Tardo un poquito.  

```{r, eval=FALSE}
0 errors âˆš | 1 warning x | 0 notes âˆš
```

El **warning** es porque debo darle una licencia
```{r, eval=FALSE}
Non-standard license specification:
    `use_mit_license()`, `use_gpl3_license()` or friends to pick a
    license
  Standardizable: FALSE
```


---

## 1.5. Licencia

Para sofware la licencia mas comun es **MIT**
```{r, eval=FALSE}
usethis::use_mit_license("Mi Nombre")
```

Me aparecio esto:
```{r, eval=FALSE}
âˆš Setting License field in DESCRIPTION to 'MIT + file LICENSE'
âˆš Writing 'LICENSE'
âˆš Writing 'LICENSE.md'
âˆš Adding '^LICENSE\\.md$' to '.Rbuildignore'
```

Para revisar si funciono
```{r, eval=FALSE}
devtools::check()
```

Tarda un poquito
```{r, eval=FALSE}
0 errors âˆš | 0 warning âˆš | 0 notes âˆš
```


---

## 1.6. metadata

Abre y modifica el documento que dice DESCRIPTION, agregando tus datos
```{r, eval=FALSE}
Authors@R:
  person(given = "Miriam",
         family = "Lerma",
         role = c("aut", "cre"),
         email = "miriamjlerma@gmail.com",
         comment = c(ORCID = "0000-0002-7632-9289"))
```

Esta la informaciÃ³n de contacto y de autor o creador.

---

## 1.7. README

Para crear un nuevo README, el paquete **usethis** tiene una funciÃ³n para crearlo de manera automÃ¡tica,

```{r, eval=FALSE}
library(usethis)
use_readme_rmd(open = rlang::is_interactive())
```

```{r, eval=FALSE}
âˆš Setting active project to '...'
âˆš Writing 'README.Rmd'
âˆš Adding '^README\\.Rmd$' to '.Rbuildignore'
 Modify 'README.Rmd'
âˆš Writing '.git/hooks/pre-commit'
```


---

name: datos
class: title-slide, center, middle
background-image: url(https://images.unsplash.com/photo-1518289646039-3e6c87a5aaf6?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1351&q=80)
background-size: cover

`r text_spec("Datos", background = "#000000", color = "white", bold = T, font_size=120)`


---

# 2. Datos

```{r, eval=FALSE, echo=FALSE}
library(here)
TDR_raw <- read.table(here("./Data/A13269_05-12-2018_PH2.csv"), header=T, sep="\t")
```

Por convencion deberas crear una carpeta que se llame **data** en tu paquete. <br>
Puedes hacer eso iendo a tu pestaÃ±a de **Files** y elegir **New Folder**. <br>

Para comprimir datos pesados puedes guardarlos como .rda.
```{r, eval=FALSE}
save(TDR_raw, file="TDR_raw.rda")
```

Para revisar el peso de los datos puedes usar
```{r, eval=FALSE}
object.size(TDR_raw)
```

```{r, eval=FALSE}
pryr::mem_used()
```

---

## 2.1. Documentar datos

Para documentar tus datos, puedes abrir un nuevo script (File>NewFile>R Script) o usar la funciÃ³n del paquete **usethis**.
```{r, eval=FALSE}
usethis::use_r("TDR_raw")
```

Esta funciÃ³n agrega comentarios Roxigen y guarda el documento en tu folder llamado **R**. <br>
En mi caso yo le di al script el mismo nombre que a los datos (TDR_raw). 
```{r, eval=FALSE}
#' Raw data from a TDR (time and depth recorder) of a Humboldt penguin
#' The data includes raw data obtained from a Humbolt Penguin at Tilgo, Chile
#' The information was collected during the breeding season 2018.
#' It contains 264197 obs from 1 variable.
#' @docType data
#' @usage data(TDR_raw)
#' @format A data frame with three columns
#' @keywords datasets
#' @references Lerma et al. 2021
#' @examples
#' data(TDR_raw)
"TDR_raw"
```

---

## 2.1. Documentar datos

Una vez creado el archivo **.rda** y **.R** se puede revisar si funciono usando funciones del paquete **devtools**
```{r, eval=FALSE}
devtools::check()
```

Si los datos son muy pesados y te aparece un mensaje como este:
```{r, eval=FALSE}
Note: significantly better compression could be obtained
          by using R CMD build --resave-data
```

Es mejor agregar el argumento compress.
```{r, eval=FALSE}
save(TDR_raw, file="TDR_raw.rda", compress = "xz")
```

---

## 2.2. Instalar el paquete

Si despues de usar **devtools::check()**, te aparece[]
```{r, eval=FALSE}
0 errors âˆš | 0 warnings âˆš | 0 notes âˆš
```
Ya deberia funcionar ðŸ¥³.

- Para instalar el paquete de manera local
```{r, eval=FALSE}
devtools::install("C:/....")
```

- Para instalar el paquete desde github
```{r, eval=FALSE}
devtools::install_github("Desarrollador/paquete")
```

---

## 2.3. Ejemplo

Mi paquete **spheniscus**
```{r, eval=FALSE}
devtools::install_github("MiriamLL/spheniscus")
```

Cargar paquete
```{r, eval=FALSE}
library(spheniscus)
```

Datos como objeto
```{r, eval=FALSE}
TDR_raw<-TDR_raw
```

---
name: funciones
class: title-slide, center, middle
background-image: url(https://images.unsplash.com/photo-1518289646039-3e6c87a5aaf6?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1351&q=80)
background-size: cover

`r text_spec("Funciones", background = "#000000", color = "white", bold = T, font_size=120)`

---

# 3. FunciÃ³n con dependencia

Muchos paquetes incluyen ademas de datos funciones.  
Si aÃºn no sabes como crear tu primera funciÃ³n puedes ir a [r4ds](https://r4ds-en-espaniol.netlify.app/funciones.html).  

La estructura es algo asÃ­:
```{r, eval=FALSE}
nombre_de_la_funcion<-function(argumentos){
  algo_que_haga_la_funcion_usando(argumentos)
  return(resultado)
}
```

---

## 3.1. Probar funciÃ³n

Yo probe mi funciÃ³n con mis datos de ejemplo, antes de incluirla en el paquete.  

1. Mi funciÃ³n requiere el paquete **tidyr** 
```{r, echo=FALSE, message=FALSE, warning=FALSE}
library(tidyr)
```

2. DefinÃ­ los argumentos por separado como objeto.
```{r parameters, eval=FALSE}
data=TDR_raw
row_start='Data Block 1'
row_end='Data Block 2'
```

3. CorrÃ­ la funcion
```{r, eval=FALSE}
extract_pressure(data = TDR_raw, row_start='Data Block 1',row_end='Data Block 2')
```

Si funciona por lo que ahora la agregare a mi paquete.

---

## 3.2. Agregar funciÃ³n

Para agregar la funciÃ³n al paquete
```{r, eval=FALSE}
usethis::use_r("extract_pressure")
```

*Abre un nuevo Rscript*
Pegue allÃ­ la funciÃ³n

Me apareciÃ³
```{r, eval=FALSE}
 Modify 'R/extract_pressure.R'
 Call `use_test()` to create a matching test file
```
Ahora en mi carpeta **R** dentro del paquete aparece la funciÃ³n.  

**Nota** te sugiere que uses use_test pero yo no hice este paso porque entra en conflicto con el siguiente.
Si le diste use_test igual puedes usar rm() mÃ¡s adeltante.

---

## 3.3. Probar funcion

Para poner la funciÃ³n en la memoria local y confirmar que se ejecute hay que incluirla en el paquete y probarla.
```{r, eval=FALSE}
devtools::load_all()
```

---

## 3.4. Documentar la funciÃ³n

Para documentar la funciÃ³n hay que crear un Roxigen skeleton.  
Para esto tienes que poner el cursor justo en la primera linea de la funciÃ³n.  
Te vas a la pestaÃ±a de Code>Insert Reoxygen Skeleton (tambÃ­en funciona con Control+Alt+Shift+R).  

Va a aparecer algo asÃ­:
```{r, eval=FALSE}
#' Title
#'
#' @param data 
#' @param row_start 
#' @param row_end 
#'
#' @return
#' @export
#'
#' @examples
```
**Nota** que identifica de manera automÃ¡tica las variables de la funciÃ³n

---

## 3.4. Documentar la funcion

En mi caso aproveche y rellene todo en ingles y espaÃ±ol.  
Aunque creo que quedo pesado para leerse.  

```{r, eval=FALSE}
#' Extracts pressure data from raw time and depth data/Extrae data de presion desde dispositivos TDR
#'
#' @param data is the raw data as imported from your device/son los datos crudos descargados de tu dispositivo
#' @param row_start is the name of the row where the pressure data starts to be recorded/es la nombre de la fila donde empieza a tomar los datos de presion
#' @param row_end is the name of the row where the pressure data finishes to be recorded/es la nombre de la fila donde termina de tomar los datos de presion
#'
#' @return it will return a object named TDR_pressure/agrega un objeto llamado TDR_pressure al environment
#' @export
#'
#' @examples cut_rawdata(data=TDR_raw, row_start='Data Block 1', row_end = 'Data Block 2')
```

---

## 3.5. Agregar la funciÃ³n 

Ahora, que ya esta la funciÃ³n y la documentaciÃ³n para agregar el paquete hay que escribir en la consola:
```{r, eval=FALSE}
devtools::document()
```

Aparece:
```{r, eval=FALSE}
Writing NAMESPACE
Writing extract_pressure.Rd
```

Ahora si abres tu carpeta que dice **man** te aparece un documento rellenado.  
**man** viene de manual y esta es la documentaciÃ³n del paquete.  
**Nota** No debe ser editado de manera manual.  

Ya puedes revisar tu documentaciÃ³n!
```{r, eval=FALSE}
?cut_rawdata
```

---

## 3.6. Dependencias

Dependencias hasta donde entendÃ­, son paquetes que necesitas cargar para que tu funciÃ³n, funcione.

Para revisar las dependencias puedes usar: 
```{r, eval=FALSE}
devtools::check()
```
Si tu paquete tiene dependencias, apareceran errores, warnings y notas.  

Por ejemplo mi paquete tiene: 
- un **%>% (pipe)** del paquete **magrittr**, y 
- usa la funciÃ³n **separate** que es del paquete **tidyr**.

---

## 3.7 Agregar dependencias

Para agregar las dependencias puedes escribir el nombre de los paquetes dentro de la funcion **use_package**
```{r, eval=FALSE}
usethis::use_package("dplyr")
```

A mi me aparecio:
```{r, eval=FALSE}
âˆš Adding 'dplyr' to Imports field in DESCRIPTION
 Refer to functions with `dplyr::fun()`
```

Ahora en DESCRIPTION me aparece
```{r, eval=FALSE}
Imports: 
    dplyr
```

Lo siguiente es especificar el paquete en la funciÃ³n, tal como recomienda el siguiente mensaje.  
```{r, eval=FALSE}
 Refer to functions with `dplyr::fun()`
```


---

## 3.7 Agregar pipe

La funciÃ³n **pipe (%>%)** del paquete magrittr es especial.  

Por lo que hay que usar:
```{r, eval=FALSE}
usethis::use_pipe()
```

Me apareciÃ³: 
```{r, eval=FALSE}
âˆš Adding 'magrittr' to Imports field in DESCRIPTION
âˆš Writing 'R/utils-pipe.R'
 Run `devtools::document()` to update 'NAMESPACE'
```

Y despuÃ©s revise el paquete:  
```{r, eval=FALSE}
devtools::document()
```

Ahora debe aparecer en R un script llamado **utils-pipe.R** y  
en la DESCRIPTION debe aparecer **Imports magrittr**

---

## 3.7 Revisar dependencias

Revisar si todo funciono.  
```{r, eval=FALSE}
devtools::check()
```

Aun aparece una nota.  
```{r, eval=FALSE}
0 errors âˆš | 0 warnings âˆš | 1 note x
```

En mi funciÃ³n original tenia assign a GlobalEnv.  
Esto no es recomendado en paquetes.  
Lo siguiente que hice fue corregir a return().

Antes:  
```{r, eval=FALSE}
  Found the following assignments to the global environment:
  File 'spheniscus/R/cut_rawdata.R':
    assign("TDR_pressure", TDR_pressure, envir = .GlobalEnv)
```

DespuÃ©s:  
```{r, eval=FALSE}
return(TDR_pressure)
```

Volver a checar
```{r, eval=FALSE}
devtools::check()
```

---
name: segunda

# 4. FunciÃ³n sin dependencias

Cree una segunda funcion con datos de GPS.  
```{r, eval=FALSE, echo=FALSE}
library(spheniscus)
```

```{r, eval=FALSE, echo=FALSE}
TDR_raw<-TDR_raw
TDR_pressure<-cut_rawdata(data = TDR_raw, row_start='Data Block 1',row_end='Data Block 2')
```

```{r, eval=FALSE, echo=FALSE}
data=TDR_pressure
timeformat="%d-%m-%Y %H:%M:%S"
trip_start="30-11-2018 20:43:24" 
trip_end="01-12-2018 20:16:19"
```

No obstante para esta funciÃ³n requiere que tengas una columna que se llame tStamp.  
Para lo que estoy trabajando eso es normal, pero si no deberas crearla.  
**Mi proposito** es agregar if else y usar corchetes para las variables.  
```{r}
extract_trip<-function(data=data,
                   timeformat=timeformat,
                   trip_start=row_start,
                   trip_end=row_end){
  data$daytime<- as.POSIXct(strptime(as.character(data$tStamp), 
                                    timeformat), "GMT")
  trip_start<-as.POSIXct(strptime(trip_start, timeformat), 'GMT')
  trip_end<-as.POSIXct(strptime(trip_end, timeformat), 'GMT')
  TDR_no_start<-subset(data, data$daytime>=trip_start)
  TDR_no_end <- subset(TDR_no_start, TDR_no_start$daytime<= trip_end)
  TDR_trip<-TDR_no_end  
  return(TDR_trip)
}
```

```{r, eval=FALSE, echo=FALSE}
TDR_trip<-extract_trip(data=TDR_pressure,
                   timeformat="%d-%m-%Y %H:%M:%S",
                   trip_start="30-11-2018 20:43:24",
                   trip_end="01-12-2018 20:16:19")
```

---

## 4.1. Agregar funciÃ³n

Para agregar la funciÃ³n al paquete
```{r, eval=FALSE}
usethis::use_r("extract_trip")
```

*Abre un nuevo Rscript*
Pegue allÃ­ la funciÃ³n

Me apareciÃ³: 
```{r, eval=FALSE}
âˆš Setting active project to 'C:/Users/Lerma/Documents/5Proyectos/2Paquetes/spheniscus/spheniscus'
 Modify 'R/extract_trip.R'
 Call `use_test()` to create a matching test file
```

Ahora en mi carpeta R tengo dentro la funciÃ³n


---

## 4.2. Documentar la funcion

Para esta parte hay que crear un Roxigen skeleton.
Para esto tienes que poner el cursor justo en la primera linea de la funciÃ³n.  
Y te vas a la pestaÃ±a de Code>Insert Reoxygen Skeleton (tambien funciona con Control+Alt+Shift+R).  

Va a aparecer algo asi:
```{r, eval=FALSE}
#' Title
#'
#' @param data 
#' @param trip_start 
#' @param trip_end 
#'
#' @return
#' @export
#'
#' @examples
```


---

## 4.3. Agregar la funciÃ³n

Para agregar la funciÃ³n al paquete:  
Escribir en la consola
```{r, eval=FALSE}
devtools::document()
```

Aparece:
```{r, eval=FALSE}
Writing NAMESPACE
Writing extract_trip.Rd
```

Ahora si abres tu carpeta que dice man te aparece un documento rellenado.
man viene de manual y esta es la documentaciÃ³n del paquete. No debe ser editado de manera manual.

Ya puedes revisar tu documentaciÃ³n!
```{r}
?extract_trip
```

---

## 4.5. Dependencias

Esta funciÃ³n no tiene nuevas dependencias, asi que no tuve que agregarlas.  

Revisar el paquete:
```{r, eval=FALSE}
devtools::check()
```

*Problemas*: El ejemplo tiene mas de 100 characteres, es muy largo!.  
```{r, eval=FALSE}
Rd file 'cut_trip.Rd':
    \examples lines wider than 100 characters:
       TDR_trip<-cut_trip(data=TDR_pressure,timeformat="%d-%m-%Y %H:%M:%S",trip_start="30-11-2018 20:43:24",trip_end="01-12-2018 20:16:19")
```

**SoluciÃ³n** Separar en la documentaciÃ³n
```{r, eval=FALSE}
#' t_format<-"%d-%m-%Y %H:%M:%S"
#' t_start<-"30-11-2018 20:43:24"
#' t_end<-"01-12-2018 20:16:19"
#' TDR_trip<-cut_trip(data=TDR_pressure,timeformat=t_format,trip_start=t_start,trip_end=t_end)
```

**Resuelto**
```{r, eval=FALSE}
0 errors âˆš | 0 warnings âˆš | 0 notes âˆš
```

---

name: sticker

# Sticker

---

## 5.1. Crear tu propio sticker

- En powerpoint [Plantilla](https://emitanaka.org/posts/hexsticker/) <br>
- En R [Paquete](https://github.com/GuangchuangYu/hexSticker)

---

class: inverse

# Recapitulando

- [Que es un paquete](#intro)  
- [Como agregar datos](#datos)
- [Como crear funcion](#funciones)
- [Como crear hexsticker](#sticker)

.right[
### Contacto

Para dudas, comentarios y sugerencias:<br>
 EscrÃ­beme a miriamjlerma@gmail.com

Este material esta accesible y se encuentra en <br>
 mi [`r fa("external-link-alt", fill = ColorEnlaceInverso)`github](https://github.com/MiriamLL/Curso_CIAD/)
y mi [`r fa("external-link-alt", fill = ColorEnlaceInverso)`pÃ¡gina www.miriam-lerma.com](https://miriamlerma.netlify.app/materiales.html) 
]

<h1>
.center[
[`r fa("home", fill = ColorEnlaceInverso)`](https://miriamlerma.netlify.app/materiales.html)
]</h1>

